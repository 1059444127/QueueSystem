<html>
<head>
    <style>
        #grid-table a
        {
            text-decoration: none;
            outline: none;
        }
        
        .ui-dialog-titlebar-close
        {
            outline: none;
        }
    </style>
</head>
<body>
    <div class="btn-toolbar">
        <div class="btn-group">
            <button class="btn btn-sm btn-primary" onclick="Add()">
                <i class="icon-plus-sign bigger-110"></i>新增
            </button>
            <button class="btn btn-sm btn-success" onclick="Edit()">
                <i class="icon-pencil bigger-110"></i>编辑
            </button>
            <button class="btn btn-sm btn-danger">
                <i class="icon-minus-sign bigger-110"></i>删除
            </button>
            <button class="btn btn-sm btn-yellow">
                <i class="icon-zoom-in bigger-110"></i>查看
            </button>
            <button class="btn btn-sm btn-info">
                <i class="icon-refresh bigger-110"></i>刷新
            </button>
        </div>
    </div>
    <div id="gridContainer">
    </div>
    <div id="dialog-message" class="hide">
    </div>
    <!-- /.row -->
    <!-- /.main-content -->
    <!-- page specific plugin scripts -->
    <script src="assets/js/jqGrid/jquery.jqGrid.min.js"></script>
    <script src="assets/js/jqGrid/i18n/grid.locale-en.js"></script>
    <script src="assets/js/jquery-ui-1.10.3.full.min.js"></script>
    <!-- inline scripts related to this page -->
    <script type="text/javascript">
        var $path_base = "/"; //this will be used in gritter alerts containing images
        var gridHeight = $(window).height() - 213;
        var editorTarget = '';
    </script>
    <script type="text/javascript">
        //override dialog's title function to allow for HTML titles
        $.widget("ui.dialog", $.extend({}, $.ui.dialog.prototype, {
            _title: function (title) {
                var $title = this.options.title || '&nbsp;'
                if (("title_html" in this.options) && this.options.title_html == true)
                    title.html($title);
                else title.text($title);
            }
        }));
        //replace icons with FontAwesome icons like above
        function updatePagerIcons(table) {
            var replacement =
                {
                    'ui-icon-seek-first': 'icon-double-angle-left bigger-140',
                    'ui-icon-seek-prev': 'icon-angle-left bigger-140',
                    'ui-icon-seek-next': 'icon-angle-right bigger-140',
                    'ui-icon-seek-end': 'icon-double-angle-right bigger-140'
                };
            $('.ui-pg-table:not(.navtable) > tbody > tr > .ui-pg-button > .ui-icon').each(function () {
                var icon = $(this);
                var $class = $.trim(icon.attr('class').replace('ui-icon', ''));
                if ($class in replacement) icon.attr('class', 'ui-icon ' + replacement[$class]);
            })
        }

        var dlgOpt = {
            modal: true,
            width: "600",
            height: "500",
            title: "<div class='widget-header widget-header-small'><h4 class='smaller'><i class='icon-list-alt'></i>基础信息维护</h4></div>",
            title_html: true,
            buttons: [
							{
							    html: "<i class='icon-ok bigger-110'></i>&nbsp; 确定",
							    "class": "btn btn-primary btn-xs",
							    click: function () {
							        save();
							        $(this).dialog("close");
							    }
							},
							{
							    html: "<i class='icon-remove bigger-110'></i>&nbsp; 取消",
							    "class": "btn btn-info btn-xs",
							    click: function () {
							        $(this).dialog("close");
							    }
							}
						]
        };

        function Add() {
            $('#dialog-message').load("Editor/" + editorTarget, function () {
                $("#dialog-message").removeClass('hide').dialog(dlgOpt);
            });
        }

        function Edit() {
            debugger;
            var sid = $("#grid-table").jqGrid('getGridParam', 'selrow');
            if (sid == null) {
                alert("没有任何选中行！");
                return;
            }
            $('#dialog-message').load("Editor/" + editorTarget, function () {
                init(Number(sid));
                $("#dialog-message").removeClass('hide').dialog(dlgOpt);
            });
        }
    </script>
</body>
</html>
